schema: '2.0'
stages:
  download-adult-dataset:
    cmd: skidless run-download-adult-dataset
    deps:
    - path: skidless/datasets.py
      md5: 14e19f0927e38f429bac2b9bc668e6d0
      size: 818
    outs:
    - path: data/bronze/adult.data.csv
      md5: 5d7c39d7b8804f071cdd1f2a7c460872
      size: 3974305
    - path: data/bronze/adult.test.csv
      md5: 35238206dfdf7f1fe215bbb874adecdc
      size: 2003153
  clean-adult-dataset:
    cmd: skidless run-clean-adult-dataset
    deps:
    - path: data/bronze/adult.data.csv
      md5: 5d7c39d7b8804f071cdd1f2a7c460872
      size: 3974305
    - path: data/bronze/adult.test.csv
      md5: 35238206dfdf7f1fe215bbb874adecdc
      size: 2003153
    - path: skidless/cleaning.py
      md5: 3afd661936b369857b9ab7cb59046bb1
      size: 1893
    params:
      params.yaml:
        clean.raw_columns:
        - age
        - workclass
        - fnlwgt
        - education
        - education_num
        - marital_status
        - occupation
        - relationship
        - race
        - gender
        - capital_gain
        - capital_loss
        - hours_per_week
        - native_country
        - income_bracket
        features.categorical_features:
        - workclass
        - education
        - marital_status
        - occupation
        - relationship
        - race
        - gender
        - native_country
        features.numerical_features:
        - age
        - fnlwgt
        - capital_gain
        - capital_loss
        - hours_per_week
        features.target_name: income_bracket
    outs:
    - path: data/silver/adult.data.parquet
      md5: 081ef3857fb2d84769d0dcafeb0ec59d
      size: 467088
    - path: data/silver/adult.test.parquet
      md5: c9ba0a90794b1084c6096cf6e5796f3f
      size: 237638
  train-preprocessors-and-featurize-adult-dataset:
    cmd: skidless run-train-preprocessors-and-featurize-train-adult-dataset
    deps:
    - path: data/silver/adult.data.parquet
      md5: ae529b12a2ff90cae67be2f408949b38
      size: 467088
    - path: skidless/features.py
      md5: 27c78ae2566978bfa16aa9c5fc7ace0c
      size: 2998
    outs:
    - path: data/gold/adult.data.parquet
      md5: 10d256c4584452404bdd0a90baa84073
      size: 699556
    - path: models/feature-preprocessor
      md5: a3371dc8af8073288b660342f37580b0
      size: 2265
    - path: models/target-preprocessor
      md5: cf1afba67cdb2a6a44baf3b72a5c7615
      size: 255
  train-model:
    cmd: skidless run-train-model
    deps:
    - path: data/gold/adult.data.parquet
      md5: 96af35f17ffe5b41d66c7dc4e9d10060
      size: 699556
    - path: skidless/model.py
      md5: 3165fe35a3b209113e6a29a781278f34
      size: 1813
    params:
      params.yaml:
        features.categorical_features:
        - workclass
        - education
        - marital_status
        - occupation
        - relationship
        - race
        - gender
        - native_country
        features.numerical_features:
        - age
        - fnlwgt
        - capital_gain
        - capital_loss
        - hours_per_week
        features.target_name: income_bracket
        model.learning_rate: 0.1
        model.max_depth: 3
        model.n_estimators: 300
        model.n_jobs: 1
        model.random_state: 1234
    outs:
    - path: models/model
      md5: 7793f44814676296826f83ca5206feef
      size: 294230
  train-preprocessors-and-featurize-train-adult-dataset:
    cmd: skidless run-train-preprocessors-and-featurize-train-adult-dataset
    deps:
    - path: data/silver/adult.data.parquet
      md5: 081ef3857fb2d84769d0dcafeb0ec59d
      size: 467088
    - path: skidless/features.py
      md5: b51d9baa652ceec352e2e90b199b83d3
      size: 2779
    params:
      params.yaml:
        features.categorical_features:
        - workclass
        - education
        - marital_status
        - occupation
        - relationship
        - race
        - gender
        - native_country
        features.numerical_features:
        - age
        - fnlwgt
        - capital_gain
        - capital_loss
        - hours_per_week
        features.target_name: income_bracket
    outs:
    - path: data/gold/adult.data.parquet
      md5: 96af35f17ffe5b41d66c7dc4e9d10060
      size: 699556
    - path: models/feature-preprocessor
      md5: bf69deb50d717ca1713ac493b1fb1820
      size: 2267
    - path: models/target-preprocessor
      md5: 5ad1593d4f27e781c22e621b4d0c5eba
      size: 257
